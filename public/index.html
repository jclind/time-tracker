<head>
    <title id='website-title'>Stopwatch</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" type="text/css" href="/styles.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css"> <!-- DELETE THIS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

</head>
<body>
    <!-- Modal overlays -->
    <div>
        <!-- Account modal blur overlay -->
        <div class="nav-modal-blur account-modal-blur"></div>
        <!-- Login modal blur overlay -->
        <div class="nav-modal-blur login-modal-blur"></div> 
        <!-- Sign up modal blur overlay -->
        <div class="nav-modal-blur signup-modal-blur"></div>
    </div>
    <div>
        <!-- Create new tag overlay -->
        <div class="nav-modal-blur new-tag-blur-overlay" id="new-tag-blur-overlay"></div>
        <!-- Change existing tag overlay -->
        <div class="nav-modal-blur change-tag-blur-overlay" id="change-tag-blur-overlay"></div>
    </div>



    <!-- Navagation bar -->
    <div class="nav-bar">
        <div class="title">Time Tracker</div>
        <div class="account-options">
            <div class="nav-dropdown nav-btn" stlye="display: none"><i class="fa fa-bars dropdown-icon"></i></div>
            <div class="nav-btn logged-out" id="login" onclick="loginModalBtn()">Login</div>
            <div class="nav-btn logged-out" id="signup" onclick="signupModalBtn()">Sign Up</div>
            <div class="nav-btn logged-in" id="logout">Logout</div>
            <div class="nav-btn logged-in" id="account" onclick="accountModalBtn()">Account</div>
        </div>
    </div><hr style="padding: 0; margin: 0;">

    <div class="nav-dropdown-modal">
        <div class="nav-dropdown-modal-exit">+</div>
        <div class="dropdown-btn-container">
            <div class="dropdown-btn dropdown-login">Login</div>
            <div class="dropdown-btn dropdown-signup">Signup</div>
            <div class="dropdown-btn dropdown-logout">Logout</div>
            <div class="dropdown-btn dropdown-account">Account</div>
        </div>
    </div>

    <!-- Stopwatch element -->
    <div id="stop-watch">
        <div class="input-container">
            <div class="title-input-container">
                <div class="title-input-text" id="title-input-text">Time Name:</div>
                <input type="text" class="title-input" id="title-input" placeholder="Enter Name">
            </div>
            <div class="dropdown-input-container">
                <div class="dropdown-input-title">Select A Tag</div>
                <div class="dropdown-container">
                    <div class="dropdown">
                        <div class="dropdown-select">
                            <span class="selected" id="selected-tag"></span>
                            <i class="fa fa-caret-down"></i>
                        </div>
                        <div class="dropdown-list" id="dropdown-list">
                        </div>
                    </div>
                    <div class="tag-btn-container">
                        <button class="new-tag-btn" id="new-tag-btn" onclick='showTagCreateModal()'>
                            <i class="fa fa-plus-square" style="font-size: 22px; color: rgb(233, 231, 231)"></i>
                        </button>
                        <div class="tag-tooltip-text">Add A New Tag</div>
                    </div>
                </div>
            </div>
        </div>
            
        
        <div class="time" id="time">0:00:00.00</div>
        <button class="start-stop-btn" id="start-stop-btn" onclick='startStop()'>Start</button>
        <button class="clear-btn" id="clear-btn">Clear</button>
        <button class="submit-btn" id="submit-btn">Submit</button>
    </div>
    
     <!-- Time table with list of time objects -->
    <div>
        <table id="time-table">
            <tr id='time-table-header'>
                <th>
                    <div class="time-table-title-cell" id="time-table-header-title" name="Title">
                        <span>Title</span>
                        <i class="fa fa-caret-down" style='display: none;'></i>
                    </div>
                </th>
                <th>
                    <div class="time-table-title-cell" id="time-table-header-tag" name="Tag">
                        <span>Tag</span>
                        <i class="fa fa-caret-down" style='display: none;'></i>
                    </div>
                </th>
                <th>
                    <div class="time-table-title-cell" id="time-table-header-time" name="Time">
                        <span>Time</span>
                        <i class="fa fa-caret-down" style='display: none;'></i>
                    </div>
                </th>
                <th>
                    <div class="time-table-title-cell" id="time-table-header-date" name="Date">
                        <span>Date</span>
                        <i class="fa fa-caret-down" style='display: none;'></i>
                    </div>
                </th>
                <th>
                    <div name="Total Time">
                        <span>Total Time</span>
                    </div>
                </th>
            </tr>
            <tr class='time-search-row'>
                <td class='time-search' id='time-search'><input placeholder='search times' class='time-search-input' id='time-search-input' autocomplete="off"></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tbody id="time-table-body">
            </tbody>
            <tr class='time-table-total-time-row'>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td id='time-table-total-time'>
                    <span>Total Time</span>
                    <div class="time-table-total-time-value" id="time-table-total-time-value">0:00.00</div>
                </td>
            </tr>
        </table>
    </div>

    <!-- Data doughnut time chart -->
    <div class="my-charts" style="height: 350px; width: 350px;">
        <canvas id="tag-distribution" width="300" height="300"></canvas>
    </div>


    <!-- Account nav bar modals -->
    <div class="nav-modal account-modal" id="account-modal"></div>
    <div class="nav-modal login-modal" id="login-modal">
        <div class="nav-modal-title login-title">Login To Your Account</div>
        <form action="" id="login-form">
            <input type="email" placeholder="Email" class="nav-modal-input" id="login-email" required>
            <input type="password" placeholder="Password" class="nav-modal-input" id="login-password" required>
            <input type="submit" class="nav-modal-button login-button" id="login-button" value="Login">
        </form>
        <div class="login-forgot-password"><span id="forgot-password-btn">Forgot Password?</span></div>
    </div>
    <div class="nav-modal signup-modal" id="signup-modal"> 
        <div class="nav-modal-title signup-title">Create Account</div>
        <form action="" id="signup-form">
            <input type="text" placeholder="Name" class="nav-modal-input" id="signup-name" required>
            <input type="email" placeholder="Email" class="nav-modal-input" id="signup-email" required>
            <input type="password" placeholder="Password" class="nav-modal-input" id="signup-password" required>
            <input type="submit" class="nav-modal-button signup-button" id="signup-button" value="Sign Up">
        </form>
    </div>

    <!-- Tag create and change modals -->
    <div class="new-tag-modal" id="new-tag-modal">
        <div class="tag-create-title">Create Tag</div>
        <input type="text" id='tag-input-text' class='tag-input-text' placeholder="Tag Name">
        <div class="color-select-container" id="color-select-container">
            <div id="red" data-tag-color="#fd483f" class="color-box" style="background: #fd483f;" onClick='selectColor(this.id)'></div>
            <div id="pink" data-tag-color="#fd889a" class="color-box" style="background: #fd889a;" onClick='selectColor(this.id)'></div>
            <div id="brown" data-tag-color="#9A6324" class="color-box" style="background: #9A6324;" onClick='selectColor(this.id)'></div>
            <div id="orange" data-tag-color="#fca12b" class="color-box" style="background: #fca12b;" onClick='selectColor(this.id)'></div>
            <div id="yellow" data-tag-color="#ffe119" class="color-box" style="background: #ffe119;" onClick='selectColor(this.id)'></div>
            <div id="lime" data-tag-color="#bfef45" class="color-box" style="background: #bfef45;" onClick='selectColor(this.id)'></div>
            <div id="dark-green" data-tag-color="#0a724f" class="color-box" style="background: #0a724f;" onClick='selectColor(this.id)'></div>
            <div id="mint" data-tag-color="#AAF0D1" class="color-box" style="background: #AAF0D1;" onClick='selectColor(this.id)'></div>
            <div id="blue" data-tag-color="#7cc3db" class="color-box" style="background: #7cc3db;" onClick='selectColor(this.id)'></div>
            <div id="navy" data-tag-color="#3D3D90" class="color-box" style="background: #3D3D90;" onClick='selectColor(this.id)'></div>
            <div id="lavendar" data-tag-color="#cc99cc" class="color-box" style="background: #cc99cc;" onClick='selectColor(this.id)'></div>
            <div id="purple" data-tag-color="#926adb" class="color-box" style="background: #926adb;" onClick='selectColor(this.id)'></div>
        </div>
        <div class="tag-buttons">
            <button class="cancel-tag-btn" onclick='hideTagCreateModal()'>Cancel</button>
            <button class="create-tag-btn" onclick='createTag()'>Create</button>
        </div>
    </div>
    <div class="change-tag-modal change-tag-modal-scrollbar" id="change-tag-modal" style="overflow-y:scroll;">
        <div class="change-tag-modal-title">Change Modal</div>
        <div class="change-tag-modal-search">
            <input type="text" placeholder="search-tags" id='change-tag-modal-search-input'>
        </div>
        <div class="change-tag-modal-tag-container" id="change-tag-modal-tag-container"></div>
        <div class="change-tag-modal-buttons">
            <button class='cancel-change-modal-btn' id='cancel-change-modal-btn' onclick='hideChangeTagModal()'>Cancel</button>
            <button class='change-tag-modal-btn' id='change-tag-modal-btn' onclick='changeTag()'>Change</button>
        </div>
    </div>



    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
        apiKey: "AIzaSyDTUdMxy5joPqkNuI1KQXxT5LB9PdxxtFc",
        authDomain: "time-tracker-da566.firebaseapp.com",
        projectId: "time-tracker-da566",
        appId: "1:598125685448:web:8bd96aa7e4725d5dc8d3fd",
        measurementId: "G-G0MG6559NQ"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        // Make auth and firestore refernces
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Update firestore settings
        db.settings({ timestampsInSnapshots: true })


    </script>
    <script src="scripts/func.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/main.js"></script>
    <script src="db.js"></script>
</body>